/*CRIACAO DAS TABELAS*/
create table AUTOINCRE(
Tabela varchar(50) primary key not null,
Sequencia integer
);

create table USUARIO(
ID INTEGER PRIMARY KEY NOT NULL,
NOME VARCHAR(50),
SENHA VARCHAR(50)
);

create table SERVICO(
ID INTEGER PRIMARY KEY NOT NULL,
DESCRICAO VARCHAR(50),
SITUACAO VARCHAR(10),
VALOR DECIMAL(10,2)
);

CREATE TABLE PRODUTO(
ID INTEGER PRIMARY KEY NOT NULL,
DESCRICAO VARCHAR(50),
SITUACAO VARCHAR(10),
UNIDADE VARCHAR(5),
VALOR DECIMAL(10, 2),
ESTOQUE DECIMAL(10,2)
);

create table VETERINARIO(
ID INTEGER PRIMARY KEY NOT NULL, 
NOME VARCHAR(50) NOT NULL,
SITUACAO VARCHAR(10),
CPF VARCHAR(20),
CRMV INTEGER NOT NULL,
UF_CRMV VARCHAR(2) NOT NULL,
TELI VARCHAR(15)
);

create table PRODUTOR(
ID INTEGER PRIMARY KEY NOT NULL, 
NOME VARCHAR(50) NOT NULL,
SITUACAO VARCHAR(10),
TELI VARCHAR(15)
);

create table ANIMAL(
ID INTEGER PRIMARY KEY NOT NULL,
NOME VARCHAR(50),
IDENTIFICACAO integer,
SITUACAO VARCHAR(10),
SEXO VARCHAR(1),		/* M > MACHO / F > FEMEA */
PROPRIETARIO integer,
ESTOQUE DECIMAL(10,2)
);


create table INSEMINACAO(
ID INTEGER PRIMARY KEY NOT NULL,
NUMERO VARCHAR(15),
DATA DATE,
ID_PRODUTOR INTEGER,
ID_VETERINARIO INTEGER,
ID_TOURO INTEGER,
OBSERVACAO BLOB,
FINALIZADA VARCHAR(1),
DT_FINALIZADA TIMESTAMP
);

create table MOVI_INSEMINACAO(
ID INTEGER NOT NULL PRIMARY KEY,
ID_INSEMINACAO INTEGER NOT NULL,
ID_ANIMAL INTEGER NOT NULL,
ID_SERVICO INTEGER NOT NULL,
ID_PRODUTO INTEGER NOT NULL,
VLR_UNIT DECIMAL(10,2),
CONFIRMADA VARCHAR(1), /* A > ANALISE / S > SIM / N > NAO */
DATA_CONFIRMACAO DATE
);

create table CONFIGURACAO(
ID INTEGER NOT NULL PRIMARY KEY,
VETERINARIO_PADRAO INTEGER,
SERVICO_PADRAO INTEGER,
PRODUTO_INSEMINACAO INTEGER
);


insert into AUTOINCRE values ('USUARIO',0);
insert into AUTOINCRE values ('SERVICO',0);
insert into AUTOINCRE values ('VETERINARIO',0);
insert into AUTOINCRE values ('PRODUTOR',0);
insert into AUTOINCRE values ('ANIMAL',0);
insert into AUTOINCRE values ('INSEMINACAO',0);
insert into AUTOINCRE values ('PRODUTO',0);
insert into AUTOINCRE values ('MOVI_INSEMINACAO',0);

ALTER TABLE ANIMAL ADD CONSTRAINT FK_ID_PROPRIETARIO FOREIGN KEY (PROPRIETARIO) REFERENCES PRODUTOR (ID);

ALTER TABLE INSEMINACAO ADD CONSTRAINT FK_ID_PRODUTOR FOREIGN KEY (ID_PRODUTOR) REFERENCES PRODUTOR (ID);
ALTER TABLE INSEMINACAO ADD CONSTRAINT FK_ID_VETERINARIO FOREIGN KEY (ID_VETERINARIO) REFERENCES VETERINARIO (ID);
ALTER TABLE INSEMINACAO ADD CONSTRAINT FK_ID_TOURO FOREIGN KEY (ID_TOURO) REFERENCES ANIMAL (ID);

ALTER TABLE MOVI_INSEMINACAO ADD CONSTRAINT FK_COD_SERV FOREIGN KEY (ID_SERVICO) REFERENCES SERVICO (ID);
ALTER TABLE MOVI_INSEMINACAO ADD CONSTRAINT FK_COD_ANI FOREIGN KEY (ID_ANIMAL) REFERENCES ANIMAL (ID);
ALTER TABLE MOVI_INSEMINACAO ADD CONSTRAINT FK_ID_INSEMINACAO FOREIGN KEY (ID_INSEMINACAO) REFERENCES INSEMINACAO (ID) on delete cascade;






